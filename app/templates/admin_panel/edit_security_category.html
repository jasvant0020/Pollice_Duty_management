{% extends 'admin_panel/admin_base.html' %}
{% block page_title %}Edit Security Category{% endblock %}

{% block content %}
<h1 class="text-3xl font-bold text-gray-800 mb-6">Edit Security Category</h1>

<div class="bg-white shadow rounded-xl p-6 max-w-xl">
    <form method="POST">
        {% csrf_token %}

        <!-- Category Name -->
        <label class="block mb-2 font-medium text-gray-700">Category Name</label>
        <input type="text" name="name" placeholder="Category Name" required
               value="{{ category.name }}"
               class="w-full p-2 mb-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500">

        <!-- Total Personnel -->
        <label class="block mb-2 font-medium text-gray-700">Total Personnel</label>
        <input type="number" name="total_personnel" placeholder="Total Personnel" required
               value="{{ category.total_personnel }}"
               class="w-full p-2 mb-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500">

        <!-- Personnel by Rank -->
        <h2 class="text-xl font-semibold text-gray-700 mb-2">Personnel by Rank</h2>
        {% for r in rank_list %}
            <label class="block mb-1">{{ r.rank }}</label>
            <input type="number" name="{{ r.rank }}" min="0"
                   value="{{ category.personnel_by_rank.r|get_item:r.rank|default:0 }}"
                   class="w-full p-2 mb-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500">
        {% endfor %}

        <!-- Submit Button -->
        <button type="submit" class="px-4 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600">Update Category</button>
    </form>
</div>
{% endblock %}
