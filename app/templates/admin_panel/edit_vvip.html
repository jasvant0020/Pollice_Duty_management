{% extends 'admin_panel/admin_base.html' %}
{% block page_title %}Edit VVIP Profile{% endblock %}

{% block content %}

<h1 class="text-3xl font-bold text-gray-800 mb-6">Edit VVIP â€“ {{ vvip.name }}</h1>

<div class="bg-white shadow rounded-2xl p-6 max-w-2xl border-t-4 border-indigo-600">

    <form method="POST" class="space-y-5">
        {% csrf_token %}
        {% include "error_message/error_message.html" %}

        <!-- Name -->
        <div>
            <label class="block text-gray-700 font-medium mb-2">Name</label>
            <input type="text" name="name" value="{{ vvip.name }}"
                   class="w-full text-gray-800 border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500" readonly>
        </div>

        <!-- Email -->
        <div>
            <label class="block text-gray-700 font-medium mb-2">Email</label>
            <input type="email" name="email" value="{{ vvip.email }}"
                   class="w-full text-gray-800 border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required>
        </div>

        <!-- Password -->
        <div>
            <label class="block text-gray-700 font-medium mb-2">Password</label>
            <input type="text" name="password" value="{{ vvip.password }}"
                   class="w-full text-gray-800 border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500" readonly>
        </div>

        <!-- Gender -->
        <div>
            <label class="block text-gray-700 font-medium mb-2">Gender</label>
            <select name="gender" class="w-full text-gray-800 border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                <option value="Male" {% if vvip.gender == "Male" %}selected{% endif %}>Male</option>
                <option value="Female" {% if vvip.gender == "Female" %}selected{% endif %}>Female</option>
                <option value="Other" {% if vvip.gender == "Other" %}selected{% endif %}>Other</option>
            </select>
        </div>

        <!-- DOB -->
        <div>
            <label class="block text-gray-700 font-medium mb-2">Date of Birth</label>
            <input type="date" name="dob" value="{{ vvip.dob|date:'Y-m-d' }}"
                   class="w-full text-gray-800 border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
        </div>

        <!-- Designation -->
        <div>
            <label class="block text-gray-700 font-medium mb-2">Designation</label>

            <select id="designation-select" name="designation" 
                    class="w-full text-gray-800 border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500" required>

                <option value="{{ vvip.designation }}" selected>{{ vvip.designation }}</option>

                {% for d in designation %}
                    <option value="{{ d }}">{{ d }}</option>
                {% endfor %}

                <option value="other">Other</option>
            </select>

            <input type="text" id="custom-designation"
                   name="custom_designation"
                   placeholder="Enter custom designation"
                   class="w-full border mt-2 px-4 py-2 rounded-lg"
                   style="display:none;">
        </div>

        <!-- Update Button -->
        <button type="submit"
                class="w-full py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
            Update VVIP
        </button>

    </form>

</div>

<script>
document.addEventListener('DOMContentLoaded', function () {
    const select = document.getElementById('designation-select');
    const customInput = document.getElementById('custom-designation');

    select.addEventListener('change', function () {
        if (this.value === 'other') {
            customInput.style.display = 'block';
        } else {
            customInput.style.display = 'none';
            customInput.value = "";
        }
    });
});
</script>

{% endblock %}
